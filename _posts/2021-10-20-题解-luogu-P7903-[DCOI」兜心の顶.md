---
layout:     post                    # 使用的布局（不需要改）
title:      题解 luogu P7903 「DCOI」兜心の顶            # 标题 
subtitle:   一道构造水题  #副标题
date:       2021-10-20              # 时间
author:     nomonick                        # 作者
header-img: img/capelcurigmount.jpg   #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    -  luogu
    -  solution
---

# P7903 「DCOI」兜心の顶

## 题面解析

题面 link : [P7903](https://www.luogu.com.cn/problem/P7903)

构造一棵 n 个结点的树，满足

- 树的直径的重心不是树的重心。

- 直径、重心、直径的重心全部唯一。

## 算法的朴素分析

这道题的构造思路很明显可以先确定一条较长的边作为直径， 再在一个不影响直径个数或长度且不是直径重心的点上补充菊花图，如下图：

![](https://pic.imgdb.cn/item/617007a32ab3f51d91cda9bb.png)

## 考虑解法

这样的构造一定成立。那么我们需要来考虑的只有直径至少需要的长度和应该在满足什么条件的点（设改点为 x ）上补成菊花图。

根据重心的定义，可以得知直径的重心就是直径的中点。由于直径的重心唯一，所以构造的树直径的长度必然为奇数。

而 x 这的点一定是树上的重心，因为包含了 x 的子树大小会急速的增大。

1.  保证在 x 上加边后不会影响直径长度

   那么即直径的两个端点不能作为 x , 所以直径的长度至少为 3 

2. 保证在 x 上加边后不会影响直径的个数

   那么即直径上与两个端点距离为 1 的点不能作为 x , 所以直径的长度至少为 5

3. 保证树的直径的重心不是树的重心

   那么直径的中点就不可以一作为 x ，所以可以推出直径的长度至少为 7 

所以我们可以假设这棵树的直径为 7。那么我们就应该在点 3 或 5 上补充菊花图。

而对于 x 来说，他的最大子树大小为 4 ，而直径中心的子树大小为 3 + siz (设 siz 为菊花图除直径上的点的大小，换句话说就是添加的边数)

保证树的直径的重心不是树的重心，所以要保证所构造的树重心在 x 上，所以至少要在直径上连接 2 个点。因此当且仅当 n >= 9 的条件下才能构造出结果。

# code

```cpp
#include <bits/stdc++.h>
using namespace std;
int n;
signed main()
{
    scanf("%d",&n);
	if (n < 9) return puts("-1"),0;
	printf("%d\n",n);
	printf("1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n");
	for (int i = 8; i <= n; ++i)
		printf("%d %d\n",i,3);
	return 0;
}
```
